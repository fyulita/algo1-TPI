#include "gtest/gtest.h"
#include "../auxiliares.h"

TEST(dilatacionTest, tapandooHuecosDeUnPixel) {
    imagen A = {
            {0, 0, 0, 0, 1, 0},
            {0, 1, 1, 0, 0, 1},
            {0, 1, 0, 1, 0, 1},
            {0, 0, 1, 1, 0, 0},
            {0, 1, 0, 1, 0, 0},
            {0, 0, 1, 0, 0, 0},
            {1, 1, 0, 0, 0, 1},
    };
    imagen B = {
            {1, 1, 1},
            {1, 1, 1},
            {1, 1, 1},
    };
    imagen esperada = {
            {1, 1, 1, 1, 1, 1},
            {1, 1, 1, 1, 1, 1},
            {1, 1, 1, 1, 1, 1},
            {1, 1, 1, 1, 1, 1},
            {1, 1, 1, 1, 1, 0},
            {1, 1, 1, 1, 1, 1},
            {1, 1, 1, 1, 1, 1},
    };

    dilatacion(A,B);

    EXPECT_EQ(esperada, A);
}

TEST(dilatacionTest, cierreConCruz) {
    imagen A = {
            {0, 0, 0, 0, 1, 0},
            {0, 1, 0, 0, 0, 1},
            {0, 1, 0, 1, 0, 1},
            {0, 0, 1, 1, 0, 0},
            {0, 0, 0, 1, 0, 0},
            {0, 0, 0, 0, 0, 0},
            {1, 1, 0, 0, 0, 1},
    };
    imagen B = {
            {0, 1, 0},
            {1, 1, 1},
            {0, 1, 0},
    };
    imagen esperada = {
            { 0, 1, 0, 1, 1, 1 },
            { 1, 1, 1, 1, 1, 1 },
            { 1, 1, 1, 1, 1, 1 },
            { 0, 1, 1, 1, 1, 1 },
            { 0, 0, 1, 1, 1, 0 },
            { 1, 1, 0, 1, 0, 1 },
            { 1, 1, 1, 0, 1, 1 },
    };

    dilatacion(A,B);

    EXPECT_EQ(esperada, A);
}

TEST(dilatacionTest, ejemploEnunciadoTPE) {
    imagen A = {
            {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
            {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
            {0, 0, 1, 0, 0, 0, 0, 0, 0, 0},
            {0, 0, 1, 0, 0, 0, 0, 0, 0, 0},
            {0, 0, 1, 0, 1, 1, 1, 1, 0, 0},
            {0, 0, 1, 0, 0, 0, 0, 0, 0, 0},
            {0, 0, 1, 0, 0, 0, 0, 0, 0, 0},
            {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
            {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
            {0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
    };
    imagen B = {
            {0, 1, 0},
            {1, 1, 1},
            {0, 1, 0},
    };
    imagen esperada = {
            {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
            {0, 0, 1, 0, 0, 0, 0, 0, 0, 0},
            {0, 1, 1, 1, 0, 0, 0, 0, 0, 0},
            {0, 1, 1, 1, 1, 1, 1, 1, 0, 0},
            {0, 1, 1, 1, 1, 1, 1, 1, 1, 0},
            {0, 1, 1, 1, 1, 1, 1, 1, 0, 0},
            {0, 1, 1, 1, 0, 0, 0, 0, 0, 0},
            {0, 0, 1, 0, 0, 0, 0, 0, 0, 0},
            {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
            {0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
    };

    dilatacion(A,B);

    EXPECT_EQ(esperada, A);
}

TEST(erosionTest, tapandooHuecosDeUnPixel) {
    imagen A = {
            {0, 0, 0, 0, 1, 0},
            {0, 1, 1, 0, 0, 1},
            {0, 1, 0, 1, 0, 1},
            {0, 0, 1, 1, 0, 0},
            {0, 1, 0, 1, 0, 0},
            {0, 0, 1, 0, 0, 0},
            {1, 1, 0, 0, 0, 1},
    };
    imagen B = {
            {1, 1, 1},
            {1, 1, 1},
            {1, 1, 1},
    };
    imagen esperada = {
            {0, 0, 0, 0, 0, 0},
            {0, 0, 0, 0, 0, 0},
            {0, 0, 0, 0, 0, 0},
            {0, 0, 0, 0, 0, 0},
            {0, 0, 0, 0, 0, 0},
            {0, 0, 0, 0, 0, 0},
            {0, 0, 0, 0, 0, 0},
    };

    erosion(A,B);

    EXPECT_EQ(esperada, A);
}

TEST(erosionTest, cierreConCruz) {
    imagen A = {
            {0, 0, 0, 0, 1, 0},
            {0, 1, 0, 0, 0, 1},
            {0, 1, 0, 1, 0, 1},
            {0, 0, 1, 1, 0, 0},
            {0, 0, 0, 1, 0, 0},
            {0, 0, 0, 0, 0, 0},
            {1, 1, 0, 0, 0, 1},
    };
    imagen B = {
            {0, 1, 0},
            {1, 1, 1},
            {0, 1, 0},
    };
    imagen esperada = {
            {0, 0, 0, 0, 0, 0},
            {0, 0, 0, 0, 0, 0},
            {0, 0, 0, 0, 0, 0},
            {0, 0, 0, 0, 0, 0},
            {0, 0, 0, 0, 0, 0},
            {0, 0, 0, 0, 0, 0},
            {0, 0, 0, 0, 0, 0},
    };

    erosion(A,B);

    EXPECT_EQ(esperada, A);
}

TEST(erosionTest, ejemploEnunciadoTPE) {
    imagen A = {
            {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
            {0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0},
            {0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0},
            {0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0},
            {0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0},
            {0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0},
            {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
    };
    imagen B = {
            {0, 1, 0},
            {1, 1, 1},
            {0, 1, 0},
    };
    imagen esperada = {
            {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
            {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
            {0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0},
            {0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0},
            {0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0},
            {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
            {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
    };

    erosion(A,B);

    EXPECT_EQ(esperada, A);
}
